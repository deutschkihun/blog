---
title: '[Testing] 시각적 회귀 테스트'
date: '2022-01-28'
lastmod: '2022-01-28'
tags: ['testing', 'visual regression test']
draft: false
summary: '시각적 회귀테스트는 기존의 Unit Test 혹은 Integration Test 로는 보완하기 힘들었던 UI 안정성 확보 및 테스트르 위해 이미지 비교를 기반으로 회귀 테스트를 진행하는 것을 말한다.'
---

![main](/static/visual-regression-test/cover.jpg)

시각적 회귀테스트는 기존의 Unit Test 혹은 Visual Regression Test 로는 보완하기 힘들었던 UI 안정성 확보 및 테스트르 위해 이미지 비교를 기반으로 회귀 테스트를 진행하는 것을 말한다

## 시각적 회귀 테스트

시각적 회귀테스트는 기존의 Unit Test 혹은 Visual Regression Test 로는 보완하기 힘들었던 UI 안정성 확보 및 테스트르 위해 이미지 비교를 기반으로 회귀 테스트를 진행하는 것을 말한다

### 그렇다면 실제 이러한 테스트 방식이 쓰이는 경우가 많이 있을까?

실제로 이러한 테스트 방식은 Unit Test 혹은 Integration Test 와 같이 컴파일 상에서 에러를 도출해주는 명시적익 에러로 잡기 어려운 스타일상의 이슈를 잡아 낼수 있습니다.

개발을 하다가 보면 의도치 않게 버그성으로 스타일이 수정 될 수 있습니다. 물론 이러한 스타일 상의 변화는 컴파일상의 에러가 아니기 때문에 기존의 테스팅으로는 잡을 수 없습니다.

하지만 시각적 회귀 테스트를 통해 정답으로 설정할 스타일을 원하는 서비스의 flow 마다 스크린샷을 만들고 회귀 테스트를 진행하면서 각 테스트 과정을 지나면서 생성된 화면과 지정된 정답 화면을 비교합니다.

그리고 일정이상 이미지의 차이가 나타난다면 테스트를 강제종료하고 두 이미지의 차이를 비교하는 스크린샷을 따로 만들어서 사용자에게 알려줍니다. 이러한 과정을 통해 기존의 스타일링 이슈를 배포 이전에 잡아서 일관성있는 UI 안정성을 유지하는데 큰 도움이 되는 테스트 방식이라고 말 할 수 있습니다.

### 실제 예시

실제로 시각적 회귀테스트를 통해 테스트를 통과지 못했을 떄 다음과 같은 스크린샷이 저장됩니다
![main](/static/visual-regression-test/example.png)

### 시각적 회귀 테스트 도입을 하려는 계획이 있다면 아래 사항들을 고려해 봐야 합니다

- 시각적 회귀를 진행 페이지를 정하기 (실제로 유의미가 있는 부분에서 작업을 해야한다.)
- 테스트 시나리오 작성
- UI 개선을 위해 스타일 변경한 부분에 대해서 에러가 발생 할텐데 그러한 부분을 매번 정답이미지로 교체 해주어야 한다. 혹은 이 과정은 CI pipeline 을 통해 자동화 해주는 것도 가능하다. 이러한 부분을 모두 작업해야 하기 때문에 개발 공수가 생각보다 많이 들어 갈 수 있다.

감사합니다.

#### reference

- [시각적 회귀 테스트로 서비스 안정성 끌어올리기](https://techblog.woowahan.com/7332/)

- [시각적 회귀 테스트](https://ideveloper2.dev/blog/2021-01-24--%EC%8B%9C%EA%B0%81%EC%A0%81-%ED%9A%8C%EA%B7%80-%ED%85%8C%EC%8A%A4%ED%8A%B8-visual-regression-test/)
